<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Apoyo - Labio Leporino & Paladar Hendido</title>
    <meta
      name="description"
      content="Directorio y convocatorias de organizaciones que atienden labio leporino y paladar hendido en Bolivia." />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet" />
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <style>
      :root {
        --bg: #0f1724; /* deep navy */
        --card: #0b1220;
        --accent: #8be9fd; /* cyan */
        --accent-2: #7dd3fc;
        --muted: #9aa4b2;
        --glass: rgba(255, 255, 255, 0.04);
        font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        background: linear-gradient(180deg, #071023 0%, #071827 50%);
        color: #e6eef6;
        min-height: 100vh;
      }
      .container {
        max-width: 1100px;
        margin: 28px auto;
        padding: 20px;
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .logo {
        width: 56px;
        height: 56px;
        border-radius: 12px;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: #042038;
      }
      h1 {
        margin: 0;
        font-size: 1.25rem;
      }
      p.lead {
        margin: 0;
        color: var(--muted);
        font-size: 0.95rem;
      }

      .hero {
        display: grid;
        grid-template-columns: 1fr 380px;
        gap: 20px;
        margin-top: 18px;
      }
      .card-hero {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          transparent
        );
        padding: 20px;
        border-radius: 14px;
        box-shadow: 0 6px 18px rgba(3, 6, 18, 0.6);
      }
      .search-row {
        display: flex;
        gap: 12px;
        align-items: center;
        margin-top: 12px;
      }
      .search-row input,
      .search-row select {
        flex: 1;
        padding: 12px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        background: transparent;
        color: inherit;
      }
      .btn {
        padding: 10px 14px;
        border-radius: 10px;
        border: none;
        background: linear-gradient(90deg, var(--accent), var(--accent-2));
        color: #042038;
        font-weight: 600;
        cursor: pointer;
      }

      .stats {
        display: flex;
        gap: 12px;
        margin-top: 12px;
      }
      .stat {
        background: var(--glass);
        padding: 10px;
        border-radius: 10px;
        color: var(--muted);
        font-size: 0.9rem;
      }

      /* cards grid */
      .grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 14px;
        margin-top: 20px;
      }
      @media (max-width: 880px) {
        .hero {
          grid-template-columns: 1fr;
        }
        .grid {
          grid-template-columns: 1fr;
        }
      }

      .org-card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          rgba(255, 255, 255, 0.01)
        );
        padding: 14px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.03);
        display: flex;
        gap: 12px;
        align-items: flex-start;
      }
      .org-brand {
        width: 64px;
        height: 64px;
        border-radius: 10px;
        flex-shrink: 0;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        display: flex;
        align-items: center;
        justify-content: center;
        color: #042038;
        font-weight: 700;
      }
      .org-info h3 {
        margin: 0 0 6px 0;
      }
      .tags {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
        margin-top: 8px;
      }
      .tag {
        background: rgba(255, 255, 255, 0.03);
        padding: 6px 8px;
        border-radius: 8px;
        font-size: 0.8rem;
        color: var(--muted);
      }
      .small {
        font-size: 0.85rem;
        color: var(--muted);
      }

      /* map area */
      #map {
        height: 320px;
        border-radius: 12px;
        overflow: hidden;
        margin-top: 14px;
      }

      footer {
        margin-top: 22px;
        padding: 18px;
        border-radius: 12px;
        background: transparent;
        color: var(--muted);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* modal */
      .modal {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(2, 6, 14, 0.6);
        z-index: 60;
      }
      .modal.open {
        display: flex;
      }
      .modal-panel {
        width: 95%;
        max-width: 780px;
        background: linear-gradient(180deg, #071627, #07141b);
        padding: 18px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.04);
      }
      .close {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.04);
        padding: 6px 10px;
        border-radius: 8px;
        color: var(--muted);
        cursor: pointer;
      }

      /* subtle animations */
      .fade-in {
        animation: fade 0.45s ease both;
      }
      @keyframes fade {
        from {
          opacity: 0;
          transform: translateY(6px);
        }
        to {
          opacity: 1;
          transform: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="brand">
          <div class="logo">LL</div>
          <div>
            <h1>ApoyoLabio & Paladar</h1>
            <p class="lead">
              Directorio local de campañas, fundaciones y hospitales — Bolivia
              (La Paz, El Alto, Cochabamba...)
            </p>
          </div>
        </div>
        <div style="text-align: right">
          <small class="small"
            >Actualizado: <strong id="updated">27/10/2025</strong></small
          >
        </div>
      </header>

      <section class="hero">
        <div class="card-hero">
          <h2 style="margin: 0">Encuentra ayuda cerca de ti</h2>
          <p class="small">
            Filtra por ciudad o servicio, consulta requisitos, y revisa próximas
            campañas. Información orientativa — confirma con la institución.
          </p>

          <div class="search-row">
            <input
              id="qCity"
              placeholder="Filtrar por ciudad (ej: La Paz, El Alto)" />
            <select id="qService">
              <option value="">Todos los servicios</option>
              <option value="Cirugía">Cirugía</option>
              <option value="Valoración">Valoración</option>
              <option value="Rehabilitación">Rehabilitación</option>
              <option value="Odontología">Odontología</option>
            </select>
            <button class="btn" id="btnFilter">Buscar</button>
          </div>

          <div class="stats">
            <div class="stat">
              Organizaciones: <strong id="statCount">0</strong>
            </div>
            <div class="stat">
              Próx. campañas: <strong id="statCamp">--</strong>
            </div>
          </div>

          <div id="map" class="fade-in"></div>
        </div>

        <aside style="display: flex; flex-direction: column; gap: 12px">
          <div class="card-hero" style="padding: 14px">
            <h3 style="margin: 0">¿Qué buscar?</h3>
            <ul style="margin-top: 8px; color: var(--muted); line-height: 1.6">
              <li>
                <strong>Convocatorias:</strong> muchas fundaciones operan por
                campañas — revisa fechas.
              </li>
              <li>
                <strong>Requisitos:</strong> documentos, edad, preselección.
              </li>
              <li>
                <strong>Valoración integral:</strong> equipos
                multidisciplinarios (cirugía, odontología, fonoaudiología).
              </li>
            </ul>
          </div>

          <div class="card-hero" style="padding: 14px; text-align: center">
            <h4 style="margin: 0">Contacto de emergencia</h4>
            <p class="small" style="margin: 6px 0">
              Si necesitas orientación rápida, contacta a Operación Sonrisa
              Bolivia.
            </p>
            <a
              id="osbLink"
              class="btn"
              href="https://operacionsonrisa.org.bo"
              target="_blank"
              >Visitar Operación Sonrisa</a
            >
          </div>
        </aside>
      </section>

      <section>
        <h2 style="margin-top: 22px">Organizaciones y servicios</h2>
        <div class="grid" id="orgGrid"></div>
      </section>

      <footer>
        <div>Hecho con ❤️ — Página de muestra</div>
        <div class="small">
          Edita los datos en el archivo y reemplaza imágenes / coordenadas.
        </div>
      </footer>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
      <div class="modal-panel fade-in">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
          ">
          <h3 id="mTitle" style="margin: 0">Título</h3>
          <div>
            <button class="close" id="mClose">Cerrar</button>
          </div>
        </div>
        <div id="mBody" class="small"></div>
      </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      // Datos de ejemplo — edita para agregar más organizaciones reales
      const ORGS = [
        {
          id: "osb-001",
          name: "Fundación Operación Sonrisa Bolivia",
          type: "Fundación",
          city: "La Paz",
          address: "Calle Domingo Banegas N.º 3902",
          lat: -16.501,
          lng: -68.145,
          services: ["Cirugía", "Valoración", "Odontología"],
          phone: "+59133446810",
          website: "https://operacionsonrisa.org.bo",
          requirements:
            "Preselección en campañas; edades y requisitos varían según convocatoria",
          notes: "Campañas periódicas. Confirma fechas en su web.",
        },
        {
          id: "ayn-001",
          name: "Fundación Ayninakuna",
          type: "Fundación",
          city: "Cochabamba",
          address: "(varía por campaña)",
          lat: -17.3935,
          lng: -66.1568,
          services: ["Cirugía", "Rehabilitación", "Educación"],
          phone: "",
          website: "",
          requirements: "Citas por programa",
          notes:
            "Colabora con redes internacionales para protocolos y formación.",
        },
        {
          id: "hm-001",
          name: "Hospital Regional El Alto (referencia)",
          type: "Hospital",
          city: "El Alto",
          address: "Av. Cívica, El Alto",
          lat: -16.5005,
          lng: -68.186,
          services: ["Valoración", "Cirugía", "Odontología"],
          phone: "",
          website: "",
          requirements: "Atención según calendario",
          notes: "Participa en campañas con universidades.",
        },
        {
          id: "uni-001",
          name: "Clínica Universitaria - Campaña U.",
          type: "Universidad",
          city: "La Paz",
          address: "Campus Universitario",
          lat: -16.505,
          lng: -68.14,
          services: ["Valoración", "Rehabilitación"],
          phone: "",
          website: "",
          requirements: "Convocatorias estudiantiles / institucionales",
          notes: "Campañas educativas y cirugías supervisadas.",
        },
      ];

      // Init map
      const map = L.map("map", { zoomControl: false }).setView(
        [-16.5, -68.15],
        11
      );
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "",
      }).addTo(map);

      const markers = L.layerGroup().addTo(map);

      function renderOrgs(list) {
        const grid = document.getElementById("orgGrid");
        grid.innerHTML = "";
        markers.clearLayers();
        list.forEach((o) => {
          const card = document.createElement("article");
          card.className = "org-card fade-in";

          const brand = document.createElement("div");
          brand.className = "org-brand";
          brand.textContent = o.name.split(" ")[0].slice(0, 2).toUpperCase();
          const info = document.createElement("div");
          info.className = "org-info";

          const title = document.createElement("h3");
          title.textContent = o.name;
          const meta = document.createElement("div");
          meta.className = "small";
          meta.textContent = `${o.type} — ${o.city}`;
          const desc = document.createElement("p");
          desc.className = "small";
          desc.textContent = o.notes || "";

          const tags = document.createElement("div");
          tags.className = "tags";
          (o.services || []).forEach((s) => {
            const t = document.createElement("div");
            t.className = "tag";
            t.textContent = s;
            tags.appendChild(t);
          });

          const actions = document.createElement("div");
          actions.style.marginTop = "10px";
          const btn = document.createElement("button");
          btn.className = "btn";
          btn.textContent = "Ver ficha";
          btn.onclick = () => openModal(o);
          actions.appendChild(btn);

          info.appendChild(title);
          info.appendChild(meta);
          info.appendChild(desc);
          info.appendChild(tags);
          info.appendChild(actions);
          card.appendChild(brand);
          card.appendChild(info);
          grid.appendChild(card);

          if (o.lat && o.lng) {
            const m = L.marker([o.lat, o.lng])
              .addTo(markers)
              .bindPopup(`<b>${o.name}</b><br>${o.city}`);
          }
        });

        document.getElementById("statCount").textContent = list.length;
      }

      function openModal(o) {
        document.getElementById("mTitle").textContent = o.name;
        document.getElementById("mBody").innerHTML = `
        <p><strong>Tipo:</strong> ${o.type}</p>
        <p><strong>Ciudad:</strong> ${o.city}</p>
        <p><strong>Dirección:</strong> ${o.address || "No disponible"}</p>
        <p><strong>Teléfono:</strong> ${o.phone || "No disponible"}</p>
        <p><strong>Sitio web:</strong> ${
          o.website
            ? `<a href="${o.website}" target="_blank">${o.website}</a>`
            : "No disponible"
        }</p>
        <p><strong>Servicios:</strong> ${(o.services || []).join(", ")}</p>
        <p><strong>Requisitos:</strong> ${o.requirements || "Consultar"}</p>
        <p><strong>Notas:</strong> ${o.notes || ""}</p>
      `;
        document.getElementById("modal").classList.add("open");
      }

      document
        .getElementById("mClose")
        .addEventListener("click", () =>
          document.getElementById("modal").classList.remove("open")
        );
      document.getElementById("modal").addEventListener("click", (e) => {
        if (e.target.id === "modal")
          document.getElementById("modal").classList.remove("open");
      });

      // filtering
      document.getElementById("btnFilter").addEventListener("click", () => {
        const city = document
          .getElementById("qCity")
          .value.trim()
          .toLowerCase();
        const service = document.getElementById("qService").value.trim();
        let list = ORGS.slice();
        if (city)
          list = list.filter(
            (o) => o.city && o.city.toLowerCase().includes(city)
          );
        if (service)
          list = list.filter((o) =>
            (o.services || [])
              .map((s) => s.toLowerCase())
              .includes(service.toLowerCase())
          );
        renderOrgs(list);
        if (list.length && list[0].lat) {
          map.setView([list[0].lat, list[0].lng], 11);
        }
      });

      // initial render
      renderOrgs(ORGS);

      // small convenience: press Enter in city input to search
      document.getElementById("qCity").addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          document.getElementById("btnFilter").click();
        }
      });
    </script>
  </body>
</html>
